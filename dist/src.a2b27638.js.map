{"version":3,"sources":["src/index.js"],"names":["document","readyState","console","log","initializeCode","addEventListener","fetchData","url","fetch","res","json","data","initMap","fetchPositive","positiveArray","Object","values","dataset","value","fetchNegative","negativeArray","dataMunicipality","map","L","minZoom","geoJson","geoJSON","onEachFeature","getFeature","weight","addTo","osm","tileLayer","maxZoom","attribution","fitBounds","getBounds","feature","layer","bindTooltip","properties","name","bindPopup","kunta"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["if (document.readyState !== \"loading\") {\r\n  console.log(\"Document is ready!\");\r\n  initializeCode();\r\n} else {\r\n  document.addEventListener(\"DOMContentLoaded\", function () {\r\n    console.log(\"Document is ready after waiting!\");\r\n    initializeCode();\r\n  });\r\n}\r\nasync function initializeCode() {\r\n  const fetchData = async () => {\r\n    const url =\r\n      \"https://geo.stat.fi/geoserver/wfs?service=WFS&version=2.0.0&request=GetFeature&typeName=tilastointialueet:kunta4500k&outputFormat=json&srsName=EPSG:4326\";\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    console.log(data);\r\n\r\n    initMap(data);\r\n  };\r\n\r\n  const fetchPositive = async () => {\r\n    const url =\r\n      \"https://statfin.stat.fi/PxWeb/sq/4bb2c735-1dc3-4c5e-bde7-2165df85e65f\";\r\n\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    const positiveArray = Object.values(data.dataset.value);\r\n\r\n    return positiveArray;\r\n  };\r\n\r\n  const fetchNegative = async () => {\r\n    const url =\r\n      \"https://statfin.stat.fi/PxWeb/sq/944493ca-ea4d-4fd9-a75c-4975192f7b6e\";\r\n\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    const negativeArray = Object.values(data.dataset.value);\r\n\r\n    return negativeArray;\r\n  };\r\n\r\n  const initMap = (dataMunicipality) => {\r\n    let map = L.map(\"map\", {\r\n      minZoom: -3,\r\n    });\r\n\r\n    let geoJson = L.geoJSON(dataMunicipality, {\r\n      onEachFeature: getFeature,\r\n      weight: 2,\r\n    }).addTo(map);\r\n\r\n    let osm = L.tileLayer(\r\n      \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n      {\r\n        maxZoom: 19,\r\n        attribution: \"Â© OpenStreetMap\",\r\n      }\r\n    ).addTo(map);\r\n\r\n    map.fitBounds(geoJson.getBounds());\r\n  };\r\n\r\n  const getFeature = (feature, layer) => {\r\n    if (!feature) return;\r\n    layer.bindTooltip(feature.properties.name);\r\n    layer.bindPopup(\r\n      `<ul>\r\n            <li>Name: ${feature.properties.name}</li>\r\n            <li>Positive migration: ${\r\n              positiveArray[feature.properties.kunta]\r\n            }</li>\r\n            <li>Negative migration: ${\r\n              negativeArray[feature.properties.kunta]\r\n            }</li>\r\n      </ul>`\r\n    );\r\n  };\r\n\r\n  const positiveArray = await fetchPositive();\r\n  console.log(positiveArray);\r\n  const negativeArray = await fetchNegative();\r\n  console.log(negativeArray);\r\n  fetchData();\r\n}\r\n"]}